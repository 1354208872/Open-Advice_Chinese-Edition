\chapterwithauthor{Kai Blin}{写作补丁}

\authorbio{Kai Blin 是一个计算生物学家，在他的　　
白天工作寻找抗生素, 无论是在计算机和在实验室里,他非常高兴他　　
被释放的软件开发的开放源码许可下工作。　　
生活在德国南部小镇的可爱T \ " ubingen,Kai的花销　　
他晚上去看电脑,编程的Samba项目。大多数　　
他剩下的业余时间都花在剧院,Kai是活跃的两个　　
在舞台上以及建筑道具、阶段和处理其它的技术　　
东西在后台.}

\noindent{}写作的补丁和提交他们经常是第一个真正的交互可以　　
与一个开源项目。他们是第一印象你给的　　
开发人员那里。让你的第一个补丁”“正确的”,然而这是判断　　
通过特定的项目你贡献,将使你的生活多　　
更容易。

确切的规则补丁应该看起来像什么,你如何需要发送它　　
该项目和所有其他的细节可能会随每个项目你　　
想要贡献。我发现一些一般规则持有几乎所有　　
时间,这就是这篇文章是关于。

\section*{如何把事情做错}

这本书是关于“事情我们希望我们知道当我们开始”, 　　
所以让我开始我的第一个补丁的故事。我首次介入　　
在实际编码在谷歌代码之夏”\texttrademark ~2005. 葡萄酒　　
项目已经接受了我实现NTLM加密基于一些samba相关　　
工具。葡萄酒是一个单一的提交者项目,这意味着只有首席开发工程师, 　　
亚历山大·茱莉亚,已提交访问主存储库。早在2005年,葡萄酒　　
仍然是使用CVS作为它的版本控制。当项目启动,我得到了　　
电子邮件,我被接受,我抓住我的导师在IRC上开始工作。

编码了令人高兴的是,我得到了第一个实现的特性。我制作了一个补丁　　
对于我的导师审查。在古代CVS天,你必须提供所有的差异　　
选择手动,但我研读过这部分。
\mbox{\texttt{cvs diff -N -u > ntlm.patch}} 和我有文件我都可以送去　　
我的导师。其实这是一件我所得到的权利,你第一件　　
应该考虑当你准备一个补丁。正常的输出从diff 　　
命令可能会更容易阅读电脑,但我从未见过一个人　　
其实更喜欢正常的输出在统一的diff输出。开启　　
由\ texttt { - u }国旗,这使得diff使用\ texttt { $ + + + $ }和　　
\ texttt { $ - - - - - $ }符号。

例如,下面的diff是由于教学Python‘你好, 　　
世界!“示例程序来迎接世界在瑞典。

\begin{verbatim}
diff --git a/hello.py b/hello.py
index 59dbef8..6334aa2 100644
--- a/hello.py
+++ b/hello.py
@@ -1,4 +1,4 @@
 #!/usr/bin/env python
 # vim: set fileencoding=utf-8

-print "Hello, world!"
+print "Hallå, världen!"
\end{verbatim}

线从\texttt{-} 被删除的行,一个开始　　
与\texttt{+} 　是一个被补充道。其他的行是帮助　　
\texttt{补丁}工具完成工作。

我的新创建的统一的diff被送到我的导师,他给我做了一个回顾和　　
我能改变很多事情。我固定的东西,把他送进了一个新的diff 　　
后不久。代码——评审周期持续了整个GSoC时间, 　　
与我的补丁在不断扩大。当铅笔向下日期到了,我有　　
一个巨大的怪物补丁和我所有的变化在那里。我真的觉得很自然　　
时间得到了修补,更不用说承诺。最后,亚历山大　　
拒绝查看补丁进一步之前,我将它分割。酒政策需要　　
补丁,小逻辑步骤添加功能。每个补丁需要　　
做一些有用的\emph{和} 编译.

现在,将一个现有的巨大的修补破碎的单独的意义
\emph{and} 　编译是大量的工作。它甚至更多的工作,因为唯一的方法　
我知道这可能是做的是编写小的补丁,创建diff,得到　　
交、更新我的本地结帐,然后编写下一个小的补丁。不久　
在我开始发送我的第一个小补丁,葡萄酒走进一个月　　
性冻结前0 9 0 beta版本。我正坐在我的下一个　　
丁以一个月前我可以继续,我最终得到了我最后的补丁　　
11月。我完全沮丧,整个经验和决定我　　
想处理葡萄酒社区了。

我的沮丧的人持有直到实际使用我的代码　
开始询问关于它在2006年2月。我的代码实际上是
有用的!他们想要更多的特性。当谷歌宣布它　　将在2006年再次GSoC干什么,我计划在夏天很清楚。现在, 　
葡萄酒已经转向git在2005年12月,我知道我不会耽搁了　
可能的代码冻结,我终于可以创建所有我的小片局部。　　
活是好的。

直到我绊了一下git前端(称为瓷在git说) 　　
模仿“被子”的行为,我得知有工具　　
以让我的生命简单甚至在2005年。

\section*{如何不把事情错了}

在我的故事,讲的是我设法把事情错了关于发送　　补丁,让我继续使用一些小技巧来避免这个陷阱。

\subsection*{补丁提交指南}

第一个提示我是去阅读任何补丁提交指南了　　
目你想为可能。那些实际上应该咨询　　
你开始编码,以及任何编码风格指南项目。

\subsection*{统一的diff}

即使不包括在这个补丁提交指南明确,你真的, 　　
的想把统一的diff输出。我还没有遇到一个项目,该项目　　
喜欢非统一的diff输出。统一的差别使审查补丁　　
以更加容易。毫不意外的是,大多数现代版本控制程序　　
动使用这种格式在diff命令。

\subsection*{使用分布式版本控制}

谈到现代版本控制,您会希望使用一个DVCS的工作　　
本地代码。Git和hg是最受欢迎的选择,集市可能　　
值得一看。即使这个项目你想有助于仍然　　
用一个集中的版本控制,能够提交您的更改　　
代是一个伟大的事情。所有提到的分布式版本控制　　
具应该能够导入从SVN或CVS提交。你可以去学习　　
子,但是说真的,未来在该领域的分布式版本　
制。

\subsection*{小的补丁,一次就做一件事}

当我不得不审查补丁,补丁,太大,或者试图做很多　　
一次,真的很讨厌的事情来处理。只做一件事的补丁　　
个时间更容易审查。最终,他们会让你的生活更容易当你　
后需要调试错误两作者和评论家的补丁　　
过了。

\subsection*{跟踪你的补丁}

在你提交你的补丁,留意的沟通渠道　　
的项目和补丁。如果你没有收到任何反馈一星期, 　　
应该礼貌的询问反馈。根据该项目处理补丁　　
交,一个补丁可能会迷失在噪声。不要期望得到你的补丁吗　
发生在第一次迭代。通常需要几个试图得到使用　　
风格的一个新项目。作为初次贡献者,没有人会责怪　　
对于这个,只要你得到正确的大多数事情。只是确保你　
修复所有的事情开发者表示,送第二个版本的　　补丁。

\section*{结论}

编写好的补丁并不困难。有几件事情要考虑,但　　
写几个他们你应该上的那些。一个现代　　
分布式)版本控制系统和工作流,你可以使用它实际　　
顾我提到的大多数事情。

\subsection*{如果你记得没有其他的事,记得这\ldots}

\begin{ 逐条列记}
  \item 使用一个分布式版本控制系统来管理你的补丁
  \item 写出补丁更改代码在小的,独立的步骤
  \item 遵循现有的编码约定
  \item 回复评论你的补丁及时
\end{ 逐条列记}

上面的指导方针应该帮助你做的大多数,如果不是所有事当　　
交你的第一个补丁。快乐的编码。
